
# Модуль управления роботом для gamepad
-----------------------------

Данный модуль обеспечивает управление роботом посредством геймпада.<br>
В модуле определено 18 осей:<br>
- 11 бинарных осей соответствующих кнопкам.<br>
- 4 оси для стиков.<br>
- 2 оси для крестовины (D-pad).<br>
- 1 ось с названием "Exit" назначает на кнопку функцию завершения работы модуля.<br> 
<br> 
- для выхода из режима управления, инициированного с данным модулем, используется кнопка назначенная на ось Exit.
- вся конфигурация модуля задается в файле **_config.ini_** в папке модуля.

Поскольку последовательность данных с геймпада отличается у разных производителей необходимо настраивать каждый геймпад отдельно.<br>
Для создания конфигурационного файла можно запустить GamepadCalibrator.<br>
Это консольное приложение заполнит config.ini.<br> Для пропуска назнечения кнопки достаточно нажать любую клавишу клавиатуры.<br>

-----------------------------
####Пример config.ini. 
- Имена осей фиксированы.
- 1-я ось отвечает за завершение работы модуля.
- 2-12-я оси представляют собой названия стандартных кнопок на геймпаде.
- 13-16-я оси описывают стики.
- 17-18-я оси описывают крестовину(D-Pad)

```ini
;Секция для Linux
[options]
input_path = /dev/input/js1

;Секция для всех платформ
[axis]
Exit = 9
B1 = 1
B2 = 2
B3 = 3
B4 = 4
L1 = 7
L2 = 5
R1 = 8
R2 = 6
start = 10
T1 = 11
T2 = 12
RTUD = 13
RTLR = 16
LTUD = 15
LTLR = 14
arrowsUD = 17
arrowsLR = 18

[B1]
upper_value = 1
lower_value = 0

[B2]
upper_value = 1
lower_value = 0

[B3]
upper_value = 1
lower_value = 0

[B4]
upper_value = 1
lower_value = 0

[L1]
upper_value = 1
lower_value = 0

[L2]
upper_value = 1
lower_value = 0

[R1]
upper_value = 1
lower_value = 0

[R2]
upper_value = 1
lower_value = 0

[start]
upper_value = 1
lower_value = 0

[T1]
upper_value = 1
lower_value = 0

[T2]
upper_value = 1
lower_value = 0

[RTUD]
upper_value = 0
lower_value = 65535

[RTLR]
upper_value = 0
lower_value = 65535

[LTUD]
upper_value = 0
lower_value = 65535

[LTLR]
upper_value = 0
lower_value = 65535

[arrowsUD]
upper_value = 1
lower_value = -1

[arrowsLR]
upper_value = 1
lower_value = -1

```

####Доступные оси геймпада
Наименование  | Верхняя граница  | Нижняя граница  | Примечание
------------  |:-----------------: | :------------------: | ------------------
B1  |  1  |  0  |  Бинарная ось. Соответствует любой кнопке из группы кнопок ABXY геймпада x-box. 
B2  |  1  |  0  |  Бинарная ось. Соответствует любой кнопке из группы кнопок ABXY геймпада x-box. 
B3  |  1  |  0  |  Бинарная ось. Соответствует любой кнопке из группы кнопок ABXY геймпада x-box.
B4  |  1  |  0  |  Бинарная ось. Соответствует любой кнопке из группы кнопок ABXY геймпада x-box.
L1  |  1  |  0  |  Бинарная ось. Соответсвует кнопке с таким же названием геймпада x-box 
L2  |  1  |  0  |  Бинарная ось. Соответсвует кнопке с таким же названием геймпада x-box
R1  |  1  |  0  |  Бинарная ось. Соответсвует кнопке с таким же названием геймпада x-box
R2  |  1  |  0  |  Бинарная ось. Соответсвует кнопке с таким же названием геймпада x-box
start  |  1  |  0  |  Бинарная ось. Соответсвует кнопке с таким же названием геймпада x-box
T1  |  1  |  0  |  Бинарная ось. Соответсвует кнопке с таким же названием геймпада x-box
T2  |  1  |  0  |  Бинарная ось. Соответсвует кнопке с таким же названием геймпада x-box
RTUD  | Назначается  |  Назначается  |  Дискретная ось. Соответствует правому стику.
RTLR  | Назначается  |  Назначается  |  Дискретная ось. Соответствует правому стику.
LTUD  | Назначается  |  Назначается  |  Дискретная ось. Соответствует левому стику.
LTLR  | Назначается  |  Назначается  |  Дискретная ось. Соответствует левому стику.
arrowsUD  |  1  |  -1  |  Дискретная ось. Соответствует крестовине(D-pad) геймпада.
arrowsLR  |  1  |  -1  |  Дискретная ось. Соответствует крестовине(D-pad) геймпада.

####Компиляция
Для компиляции модуля потребуется библиотека [SimpleIni](https://github.com/brofield/simpleini)<br>
Для компиляции модуля доп Linux потребуется библиотека [joystick++](https://github.com/drewnoakes/joystick)<br>